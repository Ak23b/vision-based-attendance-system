<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attendance System (Manual)</title>
</head>
<body>
  <h2>Manual Attendance Check-In</h2>

  <label for="name">Name:</label>
  <input type="text" id="name" placeholder="Enter Name">

  <label for="studentId">Student ID:</label>
  <input type="text" id="studentId" placeholder="Enter ID">

  <button onclick="checkIn()">Check In</button>
  <hr>

  <!-- Export buttons -->
  <button onclick="exportCSV()">Export to CSV</button>
  <button onclick="exportPDF()">Export to PDF</button>

  <!-- jsPDF library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    let attendanceLogs = [];

    function checkIn() {
      const name = document.getElementById("name").value;
      const id = document.getElementById("studentId").value;

      if (name && id) {
        const timestamp = new Date().toLocaleString();
        attendanceLogs.push({ name, id, time: timestamp });

        alert(`${name} (ID: ${id}) checked in at ${timestamp}`);

        document.getElementById("name").value = "";
        document.getElementById("studentId").value = "";
      } else {
        alert("Please enter both Name and ID.");
      }
    }

    function exportCSV() {
      if (attendanceLogs.length === 0) {
        alert("No attendance logs to export.");
        return;
      }

      let csvContent = "data:text/csv;charset=utf-8,Name,Student ID,Time\n";
      attendanceLogs.forEach(log => {
        csvContent += `${log.name},${log.id},${log.time}\n`;
      });

      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "attendance_logs.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    function exportPDF() {
      if (attendanceLogs.length === 0) {
        alert("No attendance logs to export.");
        return;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(14);
      doc.text("Attendance Report", 14, 20);

      let y = 40;
      doc.setFontSize(12);
      attendanceLogs.forEach((log, index) => {
        doc.text(`${index + 1}. ${log.name} | ID: ${log.id} | Time: ${log.time}`, 14, y);
        y += 10;
      });

      doc.save("attendance_logs.pdf");
    }
  </script>
</body>
</html>
